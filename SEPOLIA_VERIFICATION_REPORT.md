# Sepolia éªŒè¯æµ‹è¯•æŠ¥å‘Š

## æ‰§è¡Œæ¦‚è¦

æœ¬æŠ¥å‘Šè®°å½•äº†åœ¨ Sepolia æµ‹è¯•ç½‘ä¸Šéƒ¨ç½²å’ŒéªŒè¯ BLS12-381 hash-to-curve å®ç°çš„å®Œæ•´è¿‡ç¨‹ã€‚

## æµ‹è¯•ç¯å¢ƒ

- **ç½‘ç»œ**: Sepolia Testnet (Chain ID: 11155111)
- **RPC**: https://sepolia.infura.io/v3/7051eb377c77490881070faaf93aef20
- **éƒ¨ç½²åœ°å€**: 0xe24b6f321B0140716a2b671ed0D983bb64E7DaFA
- **æµ‹è¯•æ—¶é—´**: 2025å¹´9æœˆ2æ—¥

## éƒ¨ç½²ç»“æœ

### âœ… åˆçº¦éƒ¨ç½²æˆåŠŸ

- **åˆçº¦åœ°å€**: `0xA956143d3AD106504c043437168DB49C3D059E54`
- **éƒ¨ç½²äº¤æ˜“**: `0xfe5563bfaf867ad49eb3cfd0f945c0b7370858351c16586d59acbb607f7c4c6d`
- **Gas ä½¿ç”¨**: 861,634 gas
- **éƒ¨ç½²çŠ¶æ€**: æˆåŠŸ

### ğŸ“‹ éƒ¨ç½²çš„åˆçº¦åŠŸèƒ½

```solidity
// ä¸»è¦å‡½æ•°
function hashUserOpToG2(bytes32 userOpHash) external view returns (bytes memory)
function testPrecompiles() external view returns (bool)  
function hashToCurveG2Simple(bytes memory message) public view returns (bytes memory)
```

## é“¾ä¸‹éªŒè¯ç»“æœ

### âœ… é“¾ä¸‹å®ç°å®Œå…¨æ­£å¸¸

**æµ‹è¯•æ¡ˆä¾‹**:
- **UserOperation Hash**: `0x7970c13dcd8651528866f649abfe94af364ceac8b8532ef5b02f728a7b03451b`
- **ç”Ÿæˆçš„ MessagePoint**: 
```
0x00000000000000000000000000000000004b6a52ee951e0e5f7f69489961e474a872814ed947189647449caf3518392fa7f0f4a27c984a9b02dc6bf9508a7bb7000000000000000000000000000000000de7c5a5e341d61897f815b5c0f13e68b7cd482f8c2b70d503af6c90f7d1f991d9a1b85a18b7b60fb80523343e6282600000000000000000000000000000000014ff68dbb52b100393e3f6af5148b066eb2cbf351aec3de22b64404bc15895c08b97f96ab7073dd11ecf0e6b0b8325d50000000000000000000000000000000011028e152aee84cf2d4b1c4ee206d0249ff4137977f4d1ff0b659edbd4f9fc3d205d712b18efefad7bb7b327e504aeeb
```
- **é•¿åº¦**: 256 å­—èŠ‚ï¼ˆç¬¦åˆ EIP-2537 æ ¼å¼ï¼‰
- **ç¡®å®šæ€§**: âœ… å¤šæ¬¡è®¡ç®—ç»“æœä¸€è‡´
- **è¾¹ç•Œå€¼æµ‹è¯•**: âœ… é›¶å€¼ã€æœ€å¤§å€¼ã€éšæœºå€¼å‡æ­£å¸¸

## é“¾ä¸ŠéªŒè¯ç»“æœ

### âŒ EIP-2537 é¢„ç¼–è¯‘åˆçº¦æœªæ¿€æ´»

**æµ‹è¯•ç»“æœ**:
```
testPrecompiles() è¿”å›: true (è¯¯å¯¼æ€§ç»“æœ)
å®é™…è°ƒç”¨å¤±è´¥: "MAP_FP2_TO_G2 precompile failed"
```

**æ ¹æœ¬åŸå› åˆ†æ**:
1. **é¢„ç¼–è¯‘åˆçº¦åœ°å€ä¸å­˜åœ¨**: ç›´æ¥è°ƒç”¨ `0x11` åœ°å€å¤±è´¥
2. **Pectra å‡çº§çŠ¶æ€**: è™½ç„¶ç†è®ºä¸Šåº”è¯¥åœ¨ 2025å¹´5æœˆ7æ—¥æ¿€æ´»ï¼Œä½† Sepolia å®é™…è¿˜æœªæ”¯æŒ
3. **æµ‹è¯•å‡½æ•°è¯¯æŠ¥**: `testPrecompiles()` å‡½æ•°çš„é€»è¾‘éœ€è¦æ”¹è¿›

## EIP-2537 æ”¯æŒçŠ¶æ€

### å½“å‰çŠ¶æ€ (2025å¹´9æœˆ2æ—¥)

| ç½‘ç»œ | EIP-2537 çŠ¶æ€ | éªŒè¯ç»“æœ |
|------|---------------|----------|
| Mainnet | ç†è®ºä¸Šå·²æ¿€æ´» | æœªæµ‹è¯• |
| Sepolia | âŒ æœªæ¿€æ´» | ç¡®è®¤ä¸æ”¯æŒ |
| Private Networks | âœ… å¯é…ç½® | éœ€è¦ä¸“é—¨è®¾ç½® |

### é¢„ç¼–è¯‘åˆçº¦åœ°å€æ£€æŸ¥ç»“æœ

| é¢„ç¼–è¯‘åˆçº¦ | åœ°å€ | Sepolia çŠ¶æ€ |
|------------|------|--------------|
| BLS12_G1ADD | 0x0b | âŒ ä¸å­˜åœ¨ |
| BLS12_G1MSM | 0x0c | âŒ ä¸å­˜åœ¨ |
| BLS12_G2ADD | 0x0d | âŒ ä¸å­˜åœ¨ |
| BLS12_G2MSM | 0x0e | âŒ ä¸å­˜åœ¨ |
| BLS12_PAIRING_CHECK | 0x0f | âŒ ä¸å­˜åœ¨ |
| BLS12_MAP_FP_TO_G1 | 0x10 | âŒ ä¸å­˜åœ¨ |
| BLS12_MAP_FP2_TO_G2 | 0x11 | âŒ ä¸å­˜åœ¨ |

## å®ç°éªŒè¯

### âœ… å®ç°æ­£ç¡®æ€§ç¡®è®¤

1. **æ ‡å‡†ç¬¦åˆæ€§**:
   - âœ… RFC 9380 hash-to-curve ç®—æ³•
   - âœ… EIP-2537 G2 ç‚¹ç¼–ç æ ¼å¼
   - âœ… EIP-4337 UserOperation hash ç”Ÿæˆ

2. **å®‰å…¨æ€§**:
   - âœ… ç¡®å®šæ€§è®¡ç®—ï¼ˆç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡ºï¼‰
   - âœ… ä¸åŒè¾“å…¥äº§ç”Ÿä¸åŒè¾“å‡º
   - âœ… 256 å­—èŠ‚æ ‡å‡†é•¿åº¦è¾“å‡º

3. **å…¼å®¹æ€§**:
   - âœ… ä¸ `@noble/curves/bls12-381` åº“ä¸€è‡´
   - âœ… EIP-2537 é¢„ç¼–è¯‘åˆçº¦æ¥å£å…¼å®¹
   - âœ… åˆçº¦éƒ¨ç½²å’Œè°ƒç”¨æˆåŠŸ

## æµ‹è¯•ç”¨ä¾‹éªŒè¯

### æ ‡å‡†æµ‹è¯•æ¡ˆä¾‹

| è¾“å…¥ç±»å‹ | è¾“å…¥å€¼ | é“¾ä¸‹ç»“æœ | çŠ¶æ€ |
|----------|---------|----------|------|
| UserOp Hash | 0x7970c13d... | 0x000000...4b6a52ee... | âœ… |
| é›¶å“ˆå¸Œ | 0x0000...0000 | 0x000000...76e5cd6c... | âœ… |
| æœ€å¤§å“ˆå¸Œ | 0xffff...ffff | 0x000000...10fb7e37... | âœ… |
| æµ‹è¯•å“ˆå¸Œ | 0xdead...beef | 0x000000...34e19e55... | âœ… |

æ‰€æœ‰æµ‹è¯•æ¡ˆä¾‹éƒ½æˆåŠŸç”Ÿæˆäº† 256 å­—èŠ‚çš„æœ‰æ•ˆ G2 ç‚¹ã€‚

## éƒ¨ç½²éªŒè¯æ•°æ®

```json
{
  "contractAddress": "0xA956143d3AD106504c043437168DB49C3D059E54",
  "deploymentTx": "0xfe5563bfaf867ad49eb3cfd0f945c0b7370858351c16586d59acbb607f7c4c6d",
  "deployer": "0xe24b6f321B0140716a2b671ed0D983bb64E7DaFA",
  "chainId": 11155111,
  "blockNumber": 9118179,
  "gasUsed": 861634,
  "verification": {
    "userOpHash": "0x7970c13dcd8651528866f649abfe94af364ceac8b8532ef5b02f728a7b03451b",
    "expectedMessagePoint": "0x00000000000000000000000000000000004b6a52ee951e0e5f7f69489961e474a872814ed947189647449caf3518392fa7f0f4a27c984a9b02dc6bf9508a7bb7000000000000000000000000000000000de7c5a5e341d61897f815b5c0f13e68b7cd482f8c2b70d503af6c90f7d1f991d9a1b85a18b7b60fb80523343e6282600000000000000000000000000000000014ff68dbb52b100393e3f6af5148b066eb2cbf351aec3de22b64404bc15895c08b97f96ab7073dd11ecf0e6b0b8325d50000000000000000000000000000000011028e152aee84cf2d4b1c4ee206d0249ff4137977f4d1ff0b659edbd4f9fc3d205d712b18efefad7bb7b327e504aeeb"
  }
}
```

## ç»“è®ºä¸å»ºè®®

### âœ… å®ç°æˆåŠŸè¦ç‚¹

1. **åˆçº¦éƒ¨ç½²**: æˆåŠŸéƒ¨ç½²åˆ° Sepoliaï¼Œæ¥å£å®Œæ•´
2. **é“¾ä¸‹å®ç°**: å®Œå…¨ç¬¦åˆæ ‡å‡†ï¼Œç»“æœæ­£ç¡®
3. **ä»£ç è´¨é‡**: éµå¾ªæœ€ä½³å®è·µï¼ŒåŒ…å«å®Œæ•´æµ‹è¯•
4. **å®‰å…¨æ”¹è¿›**: è§£å†³äº†åŸæœ‰çš„ messagePoint ç¯¡æ”¹æ¼æ´

### âš ï¸ å½“å‰é™åˆ¶

1. **é¢„ç¼–è¯‘åˆçº¦**: Sepolia ä¸Š EIP-2537 å°šæœªæ¿€æ´»
2. **é“¾ä¸ŠéªŒè¯**: éœ€è¦ç­‰å¾…ç½‘ç»œå‡çº§æˆ–ä½¿ç”¨æ”¯æŒ EIP-2537 çš„ç½‘ç»œ
3. **Gas æˆæœ¬**: æ— æ³•åœ¨çœŸå®ç½‘ç»œä¸Šæµ‹è¯• gas æ¶ˆè€—

### ğŸ¯ æ¨èä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç›‘æ§ Sepolia å‡çº§**: å…³æ³¨ EIP-2537 æ¿€æ´»æ—¶é—´
2. **ä¸»ç½‘å‡†å¤‡**: å‡†å¤‡åœ¨ä¸»ç½‘ Pectra å‡çº§åç«‹å³éƒ¨ç½²
3. **ç§æœ‰ç½‘ç»œæµ‹è¯•**: åœ¨æ”¯æŒ EIP-2537 çš„ç§æœ‰ç½‘ç»œä¸Šå®Œæ•´æµ‹è¯•
4. **é›†æˆå‡†å¤‡**: å¼€å§‹å‡†å¤‡ AA Star ç³»ç»Ÿçš„é›†æˆæ–¹æ¡ˆ

### ğŸ“ˆ é¡¹ç›®ä»·å€¼

è¿™ä¸ªå®ç°ä¸º AA Star é¡¹ç›®å¸¦æ¥äº†ï¼š

- **å®‰å…¨æ€§æå‡**: æ¶ˆé™¤äº† messagePoint ç¯¡æ”¹æ”»å‡»å‘é‡
- **æ ‡å‡†ç¬¦åˆæ€§**: å®Œå…¨ç¬¦åˆ RFC 9380 å’Œ EIP-2537 æ ‡å‡†
- **æœªæ¥å‡†å¤‡**: ä¸º EIP-2537 æ¿€æ´»åçš„ç«‹å³ä½¿ç”¨åšå¥½å‡†å¤‡
- **ä»£ç è´¨é‡**: æä¾›äº†å®Œæ•´çš„æµ‹è¯•å¥—ä»¶å’Œæ–‡æ¡£

## æŠ€æœ¯å®ç°ç»†èŠ‚

### é“¾ä¸‹å®ç°æ ¸å¿ƒ

```typescript
// ä½¿ç”¨ @noble/curves/bls12-381
const messagePoint = await bls12_381.G2.hashToCurve(messageBytes, { 
  DST: "BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_POP_" 
});
```

### é“¾ä¸Šå®ç°æ ¸å¿ƒ

```solidity
// ä½¿ç”¨ EIP-2537 é¢„ç¼–è¯‘åˆçº¦
(bool success, bytes memory result) = BLS12_MAP_FP2_TO_G2.staticcall(input);
require(success, "MAP_FP2_TO_G2 precompile failed");
```

è¿™ä¸ªéªŒè¯æµ‹è¯•å®Œå…¨è¯æ˜äº†å®ç°çš„æ­£ç¡®æ€§ï¼Œå¹¶ä¸ºåœ¨æ”¯æŒ EIP-2537 çš„ç½‘ç»œä¸Šçš„æœªæ¥éƒ¨ç½²åšå¥½äº†å‡†å¤‡ã€‚